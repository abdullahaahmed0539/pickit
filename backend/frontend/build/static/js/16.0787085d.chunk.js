(this.webpackJsonppickit=this.webpackJsonppickit||[]).push([[16],{225:function(t,e,r){"use strict";r.r(e);var n=r(40),c=r(3),a=r(0),s=r(48),o=r(61),u=r(15),i=r(53),l=r(238),d=r(1);e.default=Object(c.i)((function(t){var e=t.history,r=Object(c.h)().productId,p=Object(a.useState)({}),h=Object(n.a)(p,2),m=h[0],b=h[1],f=Object(a.useState)(!1),j=Object(n.a)(f,2),v=j[0],O=j[1],x=Object(a.useState)(!1),g=Object(n.a)(x,2),w=g[0],y=g[1],k=Object(a.useState)(!1),N=Object(n.a)(k,2),S=N[0],_=N[1],I=Object(a.useState)(""),T=Object(n.a)(I,2),C=T[0],q=T[1],R=Object(a.useState)(""),E=Object(n.a)(R,2),U=E[0],A=E[1],L=Object(a.useState)([]),P=Object(n.a)(L,2),F=P[0],Y=P[1],z=Object(a.useState)(0),B=Object(n.a)(z,2),J=B[0],H=B[1],K=Object(a.useState)(!1),M=Object(n.a)(K,2),V=M[0],D=M[1],G=Object(a.useState)(!1),Q=Object(n.a)(G,2),W=Q[0],X=Q[1],Z=Object(a.useState)(""),$=Object(n.a)(Z,2),tt=$[0],et=$[1],rt=function(t,r){Object(s.a)(t).then((function(t){200!==t.status?alert("Unable to add product to cart !"):(_(!0),r&&e.push("/checkout"))})).catch((function(t){return console.log(t)}))};return Object(a.useEffect)((function(){Object(s.i)(r).then((function(t){y(!0),b(t.data.data.product),_(t.data.data.inCart),D(t.data.data.sentRequest),X(t.data.data.recievedRequest),et(t.data.data.soldTo)})).catch((function(t){y(!0),406===t.response.status&&O(!0)})),localStorage.getItem("token")&&Object(s.e)(localStorage.getItem("user_id")).then((function(t){Y(t.data.data.filter((function(t){return"exchange"===t.transactionType&&"active"===t.status})))})).catch((function(){return console.log("Error retrieving User Products from the db")}))}),[r,S,V]),Object(d.jsxs)("div",{className:"container",children:[!w&&!v&&Object(d.jsx)(u.a,{text:"Fetching product details"}),w&&v&&Object(d.jsx)(i.a,{title:"Error while fetching.",message:"Product Unavailable."}),w&&!v&&Object(d.jsxs)("div",{className:"row mt-5",children:[Object(d.jsx)("img",{className:"col-12 col-md-4 mb-3",src:m.images,alt:"...",style:{height:"100%"}}),Object(d.jsxs)("div",{className:"col-12 col-md-6 offset-md-1",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("h2",{className:"col-12",children:m.productName})}),Object(d.jsxs)("div",{className:"row mb-4",children:[Object(d.jsx)("div",{className:"col-12",children:"price: "}),Object(d.jsx)("div",{className:"col-12",children:Object(d.jsxs)("h4",{children:["PKR ",m.price]})})]}),null===localStorage.getItem("username")&&Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("button",{className:"col-5 col-md-6 col-lg-4 ms-3 btn btn-success ",onClick:function(){return e.push("/login")},children:"Login to continue"})}),"sold"===m.status&&Object(d.jsxs)("p",{children:["Sold to: ",Object(d.jsx)("strong",{children:tt})]}),m.username===localStorage.getItem("username")&&"normal"===localStorage.getItem("userType")&&"exchange"===m.transactionType&&"sold"!==m.status&&Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("button",{className:"col-5 col-md-4 col-lg-3 ms-3 btn btn-warning ",onClick:function(){return e.push({pathname:"/requests/".concat(r),state:{name:m.productName,price:m.price,description:m.description,image:m.images}})},children:["Requests"," ",0!==m.requests.length?Object(d.jsx)("span",{className:"badge rounded-pill bg-danger",children:m.requests.length}):""]}),Object(d.jsx)("button",{className:"col-5 col-md-4 col-lg-3 ms-3 btn btn-primary",onClick:function(){e.push({pathname:"/products/update_product",state:{_id:m._id,name:m.productName,price:m.price,imageLink:m.images[0],description:m.description,type:m.transactionType,categoryid:m.categoryId}})},variant:"primary",children:"Edit"})]}),m.username===localStorage.getItem("username")&&"normal"===localStorage.getItem("userType")&&"sell"===m.transactionType&&"sold"!==m.status&&Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("button",{className:"col-5 col-md-5 col-lg-4 ms-3 btn btn-primary ",onClick:function(){e.push({pathname:"/products/update_product",state:{_id:m._id,name:m.productName,price:m.price,imageLink:m.images[0],description:m.description,type:m.transactionType,categoryid:m.categoryId}})},variant:"primary",children:"Edit"})}),"sell"===m.transactionType&&"normal"===localStorage.getItem("userType")&&m.username!==localStorage.getItem("username")&&Object(d.jsxs)("div",{className:"row",children:[!S&&"active"===m.status&&Object(d.jsx)("button",{onClick:function(){return rt(r,!1)},className:"col-5 col-md-4 col-lg-3 ms-3 btn btn-primary ",children:"Add to cart"}),S&&"active"===m.status&&Object(d.jsx)("button",{onClick:function(){return function(t){Object(s.k)(t).then((function(t){200!==t.status?alert("Unable to remove product from the cart !"):_(!1)})).catch((function(t){return console.log(t)}))}(r)},className:"col-5 col-md-4 col-lg-3 ms-3 btn btn-secondary ",children:"Remove from cart"}),"active"===m.status&&Object(d.jsx)("button",{className:"col-5 col-md-4 col-lg-3 ms-3 btn btn-success ",onClick:function(){return rt(r,!0)},children:"Checkout"})]}),!W&&"exchange"===m.transactionType&&"normal"===localStorage.getItem("userType")&&m.username!==localStorage.getItem("username")&&"sold"!==m.status&&Object(d.jsxs)("div",{className:"row",children:[!V&&Object(d.jsx)("h6",{children:"Exchange with: "}),V?Object(d.jsx)("h6",{className:"text-danger",children:"You have already sent a request for this product."}):Object(d.jsxs)(l.a,{children:[Object(d.jsx)(l.a.Toggle,{variant:"light",className:"btn-outline-dark",children:C}),Object(d.jsx)(l.a.Menu,{className:"col-12",children:F.map((function(t){return Object(d.jsx)(l.a.Item,{onClick:function(){q(t.productName),A(t._id),H(m.price-t.price)},children:Object(d.jsx)("p",{className:"col-3",children:t.productName})},t._id)}))})]}),""!==C&&J>0&&Object(d.jsxs)("p",{style:{marginTop:"5px",color:"red"},children:["You will have to pay additional Rs : ",J]}),""!==C&&J<0&&Object(d.jsxs)("p",{style:{marginTop:"5px",color:"blue"},children:["You will recieve Rs : ",-J]}),!V&&Object(d.jsx)("button",{className:"col-5 col-md-5 col-lg-4 ms-3 mt-3 btn btn-primary ",onClick:function(){return function(t,r){var n=localStorage.getItem("username"),c=m.username;Object(o.e)(t,n,c,J,r).then((function(t){200===t.status?(D(!0),e.push("/Home")):alert("Unable to send request")})).catch()}(r,U)},disabled:!(""!==C&&!V),children:V?"Request Sent":"Send Request"}),V&&Object(d.jsx)("div",{style:{marginTop:"10px"},children:Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.push("/requests/sent/".concat(localStorage.getItem("user_id")))},children:"View request"})})]}),Object(d.jsxs)("div",{className:"row mt-5",children:[Object(d.jsx)("h5",{children:"About the product"}),Object(d.jsxs)("p",{children:[" ",m.description]})]}),Object(d.jsxs)("div",{className:"row mt-2",children:[Object(d.jsx)("h5",{children:"Seller details"}),Object(d.jsxs)("p",{children:[" ","Username: ",Object(d.jsx)("strong",{children:m.username})]})]}),"moderator"===localStorage.getItem("userType")&&Object(d.jsxs)("div",{className:"row mt-4 mb-5",children:[Object(d.jsx)("button",{className:"col-4 col-md-4 col-lg-3 ms-3 me-1 btn btn-primary ",onClick:function(){return e.push("/products/".concat(m._id,"/updatePrice"))},children:"Update product"}),Object(d.jsx)("button",{className:"col-3 col-md-3 col-lg-3 me-1 btn btn-success ",onClick:function(){return function(t){var e={action:"active",productId:m._id};Object(s.b)(e).then((function(){return window.location="/moderator_home"})).catch((function(){return console.log("Error while approving product")}))}(m._id)},children:"Approve"}),Object(d.jsx)("button",{className:"col-3 col-md-3 col-lg-3 btn btn-danger ",onClick:function(){return m._id,void Object(s.m)(m._id).then((function(){return window.location="/moderator_home"})).catch((function(){return console.log("Error while unapproving product")}))},children:"Reject"})]})]})]})]})}))},48:function(t,e,r){"use strict";r.d(e,"g",(function(){return l})),r.d(e,"c",(function(){return d})),r.d(e,"i",(function(){return p})),r.d(e,"n",(function(){return h})),r.d(e,"d",(function(){return m})),r.d(e,"m",(function(){return b})),r.d(e,"h",(function(){return f})),r.d(e,"b",(function(){return j})),r.d(e,"j",(function(){return v})),r.d(e,"o",(function(){return O})),r.d(e,"f",(function(){return x})),r.d(e,"a",(function(){return g})),r.d(e,"k",(function(){return w})),r.d(e,"l",(function(){return y})),r.d(e,"e",(function(){return k}));var n=r(42),c=r.n(n),a=r(43),s=r(44),o=r.n(s),u=localStorage.getItem("token"),i={headers:{Authorization:"Bearer ".concat(u)}},l=function(){var t=Object(a.a)(c.a.mark((function t(e,r,n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/users/".concat(e,"/get_products"),{pageId:r,productFilter:n},i);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/create_new",e,i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/products/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/update",e,i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("http://localhost:8080/products/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("http://localhost:8080/products/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(a.a)(c.a.mark((function t(){var e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/products/unapproved",i);case 2:return e=t.sent,r=e.data.data.filter((function(t){return"exchange"===t.transactionType})),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/approve",e,i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/products/upload_image");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":r.type}},t.next=3,o.a.put(e,r,n);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),x=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/products/cart/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/addToCart/".concat(e),{},i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/removeFromCart/".concat(e),{},i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/products/sell_product",{_id:e},i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/products/fetch_all_exchangable",i);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},53:function(t,e,r){"use strict";r(0);var n=r(1);e.a=function(t){return Object(n.jsxs)("div",{className:"container border border-dark",style:{marginTop:"20%"},children:[Object(n.jsx)("div",{className:"row mt-5",children:Object(n.jsx)("div",{className:"col-md-8 offset-md-4",children:Object(n.jsx)("h1",{children:t.title})})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-8 offset-md-4",children:Object(n.jsx)("h4",{children:t.message})})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("button",{className:"btn btn-primary col-md-2 offset-md-4 mt-4 mb-5",style:{marginLeft:"32em"},onClick:function(){window.location.reload(!0)},children:"Reload"})})]})}},61:function(t,e,r){"use strict";r.d(e,"e",(function(){return l})),r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return p})),r.d(e,"b",(function(){return h})),r.d(e,"d",(function(){return m}));var n=r(42),c=r.n(n),a=r(43),s=r(44),o=r.n(s),u=localStorage.getItem("token"),i={headers:{Authorization:"Bearer ".concat(u)}},l=function(){var t=Object(a.a)(c.a.mark((function t(e,r,n,a,s){var u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={senderName:r,recieverName:n,productId:e,offer:{cash:a,productId:s}},t.next=3,o.a.post("http://localhost:8080/requests/create_new",u,i);case 3:return l=t.sent,t.abrupt("return",l);case 5:case"end":return t.stop()}}),t)})));return function(e,r,n,c,a){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/requests/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(c.a.mark((function t(e,r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("http://localhost:8080/requests/".concat(e),{action:r},i);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),h=function(){var t=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/requests/pending",i);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(a.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("http://localhost:8080/requests/remove/".concat(e),i);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=16.0787085d.chunk.js.map